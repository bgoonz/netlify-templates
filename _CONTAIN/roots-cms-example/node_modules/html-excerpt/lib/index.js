// Generated by CoffeeScript 1.7.1
(function() {
  var cheerio;

  cheerio = require("cheerio");

  exports.text = function(html, count, more_text) {
    var res;
    if (count <= 0) {
      throw new Error("count must be a negative number");
    }
    if (count >= html.length) {
      return html;
    }
    html = html.replace(/<\/?[^>]+>/gi, '').trim();
    res = html.substr(0, count) + (more_text || "");
    return res.replace(/\n+/g, '<br />');
  };

}).call(this);
